spring:
  datasource:
    url: jdbc:postgresql://localhost:5433/paws360_dev
    username: paws360
    password: paws360_dev_password
    driver-class-name: org.postgresql.Driver
  jpa:
    hibernate:
      ddl-auto: none
    defer-datasource-initialization: true
    show-sql: true
    properties:
      hibernate:
        format_sql: true
    database: postgresql
  sql:
    init:
      mode: never

server:
  port: ${SERVER_PORT:8086}
  error:
    include-message: always
    include-binding-errors: always
    include-stacktrace: never
    include-exception: false

# Comprehensive logging configuration
logging:
  level:
    root: INFO
    com.uwm.paws360: DEBUG
    com.uwm.paws360.Controller: INFO
    com.uwm.paws360.Service: INFO
    com.uwm.paws360.config.GlobalExceptionHandler: WARN
    org.springframework.web: INFO
    org.springframework.security: WARN
    org.hibernate.SQL: WARN
    org.hibernate.type.descriptor.sql.BasicBinder: WARN
    web: INFO
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level [%X{requestId}] %logger{36} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level [%X{requestId}] %logger{36} - %msg%n"
  file:
    name: logs/paws360-demo.log
    max-size: 10MB
    max-history: 30
  logback:
    rollingpolicy:
      max-file-size: 10MB
      total-size-cap: 1GB

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus,env,beans,loggers
      base-path: /actuator
  endpoint:
    health:
      show-details: always
      show-components: always
      probes:
        enabled: true
    info:
      enabled: true
    metrics:
      enabled: true
    loggers:
      enabled: true
  health:
    defaults:
      enabled: true
    db:
      enabled: true
    diskspace:
      enabled: true
    ping:
      enabled: true
  info:
    build:
      enabled: true
    git:
      enabled: true
    java:
      enabled: true
    env:
      enabled: true

# Demo-specific configuration
paws360:
  demo:
    enabled: true
    health-check:
      timeout: 5s
      interval: 30s
    authentication:
      session-timeout: 3600s # 1 hour for demo
      max-sessions: 100
    data:
      consistency-check: true
      auto-reset: false
  cors:
    allowed-origins: ${CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:9002}
    allowed-credentials: true
    max-age: 3600
  session:
    cookie:
      # If we keep cross-origin in some environments, these can be overridden.
      # SameSite 'Lax' works for first-party rewrite approach. Use 'None' with Secure in HTTPS.
      same-site: ${SESSION_COOKIE_SAMESITE:Lax}
      secure: ${SESSION_COOKIE_SECURE:false}
      http-only: true
